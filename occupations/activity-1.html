<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jobs and Occupations</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Fredoka+One&display=swap" rel="stylesheet">
<style>
  :root {
    --sky: #0ea5e9;
    --sun: #f59e0b;
    --mint: #10b981;
    --coral: #f43f5e;
    --purple: #7c3aed;
    --navy: #0f172a;
    --cream: #fefce8;
    --shadow: 0 4px 20px rgba(15,23,42,0.09);
    --radius: 16px;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--cream);
    color: var(--navy);
    min-height: 100vh;
  }

  body::before {
    content: '';
    position: fixed; inset: 0; z-index: -1;
    background:
      radial-gradient(ellipse at 0% 0%, #bae6fd40 0%, transparent 50%),
      radial-gradient(ellipse at 100% 100%, #bbf7d040 0%, transparent 50%),
      var(--cream);
  }

  header { text-align: center; padding: 36px 20px 20px; }

  header h1 {
    font-family: 'Fredoka One', cursive;
    font-size: clamp(1.9rem, 5vw, 3rem);
    color: var(--navy);
  }

  header h1 em { font-style: normal; color: var(--sky); }
  header p { margin-top: 6px; font-size: 0.97rem; color: #64748b; font-weight: 600; }

  .progress-wrap {
    display: flex; justify-content: center; gap: 10px;
    padding: 4px 20px 30px; flex-wrap: wrap;
  }

  .prog-step {
    padding: 8px 20px; border-radius: 50px; font-weight: 800;
    font-size: 0.85rem; cursor: pointer; border: 2.5px solid #e2e8f0;
    background: white; box-shadow: var(--shadow); opacity: .55;
    transition: all .25s; color: var(--navy);
  }

  .prog-step.active { opacity: 1; border-color: var(--sky); color: var(--sky); }
  .prog-step.done   { opacity: 1; background: var(--mint); color: white; border-color: var(--mint); }

  .section { display: none; max-width: 820px; margin: 0 auto; padding: 0 16px 64px; }
  .section.active { display: block; animation: up .35s ease; }

  @keyframes up {
    from { opacity: 0; transform: translateY(18px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .sec-title { font-family: 'Fredoka One', cursive; font-size: 1.65rem; margin-bottom: 4px; }
  .sec-sub   { font-size: 0.93rem; color: #64748b; font-weight: 600; margin-bottom: 22px; }

  .card {
    background: white; border-radius: var(--radius);
    box-shadow: var(--shadow); padding: 22px 26px; margin-bottom: 16px;
  }

  .btn {
    display: inline-block; padding: 12px 28px; border-radius: 50px;
    font-family: 'Nunito', sans-serif; font-weight: 800; font-size: 0.97rem;
    cursor: pointer; border: none; transition: all .2s;
  }

  .btn-blue   { background: var(--sky);    color: white; box-shadow: 0 4px 14px #0ea5e933; }
  .btn-green  { background: var(--mint);   color: white; box-shadow: 0 4px 14px #10b98133; }
  .btn-purple { background: var(--purple); color: white; box-shadow: 0 4px 14px #7c3aed33; }
  .btn-yellow { background: var(--sun);    color: white; box-shadow: 0 4px 14px #f59e0b33; }
  .btn:hover  { transform: translateY(-2px); filter: brightness(1.07); }
  .btn.hidden { display: none; }

  .feedback { font-size: 1rem; font-weight: 800; margin-top: 12px; min-height: 24px; }
  .feedback.ok  { color: var(--mint); }
  .feedback.err { color: var(--coral); }
  .flex-center { display: flex; justify-content: center; margin-top: 18px; }

  /* --- SECTION 1 --- */
  .round-bar {
    display: flex; justify-content: space-between; align-items: center;
    font-weight: 700; color: #475569; font-size: 0.93rem; margin-bottom: 16px;
  }

  .score-display { font-family: 'Fredoka One', cursive; font-size: 1.5rem; color: var(--sun); }

  .clue-label {
    font-size: 0.76rem; font-weight: 800; letter-spacing: 1.2px;
    text-transform: uppercase; color: #94a3b8; margin-bottom: 8px; text-align: center;
  }

  .clue-box {
    background: linear-gradient(135deg, #e0f2fe, #bae6fd);
    border-radius: 12px; padding: 18px 22px; font-size: 1.07rem; font-weight: 700;
    color: #0369a1; min-height: 64px; display: flex; align-items: center;
    justify-content: center; text-align: center; line-height: 1.5; margin-bottom: 14px;
  }

  .ans-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 9px; margin-top: 12px; }

  .ans-btn {
    padding: 11px 14px; border-radius: 11px; border: 2.5px solid #e2e8f0;
    background: white; font-family: 'Nunito', sans-serif; font-size: 0.97rem;
    font-weight: 700; cursor: pointer; transition: all .18s; color: var(--navy);
  }

  .ans-btn:hover:not(:disabled) { border-color: var(--sky); background: #e0f2fe; transform: translateY(-2px); }
  .ans-btn.correct { background: var(--mint); color: white; border-color: var(--mint); }
  .ans-btn.wrong   { background: var(--coral); color: white; border-color: var(--coral); }

  .more-clue-btn {
    background: #fef9c3; border: 2px solid #fde68a; color: #92400e;
    font-family: 'Nunito', sans-serif; font-weight: 800; font-size: 0.88rem;
    padding: 9px 20px; border-radius: 50px; cursor: pointer; transition: all .2s;
    display: inline-block;
  }

  .more-clue-btn:hover { background: #fde68a; }

  /* --- SECTION 2 --- */
  .match-cols { display: grid; grid-template-columns: 1fr 1fr; gap: 16px 36px; }
  @media (max-width: 520px) { .match-cols { grid-template-columns: 1fr; } }

  .match-col-label {
    font-size: 0.76rem; text-transform: uppercase; font-weight: 800;
    letter-spacing: 1px; color: #94a3b8; margin-bottom: 10px;
  }

  .drag-item {
    background: #f0f9ff; border: 2px solid #bae6fd; border-radius: 10px;
    padding: 10px 15px; font-weight: 700; font-size: 0.93rem; cursor: grab;
    margin-bottom: 7px; user-select: none; transition: all .18s; color: #0c4a6e;
  }

  .drag-item:hover { transform: translateX(3px); box-shadow: 0 3px 10px #0ea5e920; }
  .drag-item.dragging { opacity: .3; }
  .drag-item.used { opacity: .25; cursor: default; pointer-events: none; }

  .drop-row { margin-bottom: 10px; }
  .drop-job-label { font-size: 0.88rem; font-weight: 800; color: var(--navy); margin-bottom: 3px; }

  .drop-zone {
    border: 2px dashed #cbd5e1; border-radius: 10px; padding: 9px 15px;
    font-size: 0.93rem; font-weight: 700; color: #94a3b8; min-height: 42px;
    display: flex; align-items: center; background: #f8fafc; transition: all .18s;
  }

  .drop-zone.over    { border-color: var(--sky); background: #e0f2fe; color: var(--sky); }
  .drop-zone.filled  { border-style: solid; border-color: #93c5fd; background: #eff6ff; color: #1e40af; }
  .drop-zone.correct { border-color: var(--mint); background: #d1fae5; color: #065f46; border-style: solid; }
  .drop-zone.wrong   { border-color: var(--coral); background: #ffe4e6; color: #9f1239; border-style: solid; }

  /* --- SECTION 3 --- */
  .job-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 9px; margin-bottom: 20px; }

  .job-card {
    padding: 14px 8px; border-radius: 12px; border: 2.5px solid #e2e8f0;
    background: white; font-family: 'Nunito', sans-serif; font-size: 0.88rem;
    font-weight: 800; cursor: pointer; text-align: center; transition: all .18s;
    color: var(--navy); line-height: 1.3;
  }

  .job-card .pic { font-size: 1.9rem; display: block; margin-bottom: 5px; }
  .job-card:hover { border-color: var(--purple); background: #f5f3ff; transform: translateY(-2px); }
  .job-card.selected { border-color: var(--purple); background: #ede9fe; color: var(--purple); }

  .frame-block {
    border-left: 4px solid var(--purple); background: #f8f7ff;
    border-radius: 0 10px 10px 0; padding: 14px 18px; margin-bottom: 12px;
    font-size: 0.97rem; font-weight: 700; color: #1e1b4b; line-height: 2;
  }

  .blank {
    display: inline-block; border: none; border-bottom: 2.5px solid var(--purple);
    background: transparent; font-family: 'Nunito', sans-serif; font-size: 0.97rem;
    font-weight: 800; color: var(--purple); padding: 1px 6px; outline: none;
    min-width: 140px; vertical-align: baseline;
  }

  .word-bank-label {
    font-size: 0.78rem; font-weight: 800; text-transform: uppercase;
    letter-spacing: 1px; color: #94a3b8; margin-bottom: 8px;
  }

  .word-bank { display: flex; flex-wrap: wrap; gap: 7px; margin-bottom: 14px; }

  .chip {
    background: #ede9fe; color: var(--purple); padding: 5px 14px; border-radius: 50px;
    font-size: 0.85rem; font-weight: 700; cursor: pointer; border: 2px solid transparent;
    transition: all .18s; user-select: none;
  }

  .chip:hover { background: var(--purple); color: white; }

  textarea.free-write {
    width: 100%; border: 2px solid #e2e8f0; border-radius: 10px; padding: 12px 14px;
    font-family: 'Nunito', sans-serif; font-size: 0.97rem; font-weight: 600;
    color: var(--navy); resize: vertical; min-height: 90px; outline: none;
    transition: border .18s; background: white;
  }

  textarea.free-write:focus { border-color: var(--purple); }

  .write-result {
    display: none; background: #d1fae5; border-radius: 12px; padding: 16px 20px;
    font-size: 0.97rem; font-weight: 700; color: #064e3b; margin-top: 14px; line-height: 1.9;
  }

  /* FINAL */
  #final-screen { display: none; text-align: center; padding: 60px 20px; max-width: 460px; margin: 0 auto; }
  #final-screen .big-icon { font-size: 5rem; animation: bob 1.1s ease-in-out infinite alternate; display: block; }
  @keyframes bob { from { transform: translateY(0); } to { transform: translateY(-12px); } }
  #final-screen h2 { font-family: 'Fredoka One', cursive; font-size: 2.3rem; margin: 14px 0 6px; }
  #final-screen p { color: #64748b; font-weight: 600; font-size: 1rem; }
  .stars { font-size: 2rem; letter-spacing: 5px; margin: 14px 0; }
</style>
</head>
<body>

<header>
  <h1>Jobs &amp; <em>Occupations</em></h1>
  <p>Three activities to learn about jobs</p>
</header>

<div class="progress-wrap">
  <div class="prog-step active" id="step1" onclick="goTo(1)">1. Who Am I?</div>
  <div class="prog-step" id="step2" onclick="goTo(2)">2. Match It</div>
  <div class="prog-step" id="step3" onclick="goTo(3)">3. Write About It</div>
</div>

<!-- SECTION 1 -->
<section class="section active" id="section1">
  <div class="sec-title">Who Am I?</div>
  <div class="sec-sub">Read the clues and guess the job. You can ask for more clues, but you lose points!</div>
  <div class="card" id="guess-card">
    <div class="round-bar">
      <span>Round <span id="round-num">1</span> of 30</span>
      <span>Score: <span class="score-display" id="score1">0</span></span>
    </div>
    <div class="clue-label" id="clue-label">Clue 1 of 3</div>
    <div class="clue-box" id="clue-box">...</div>
    <div style="text-align:center; margin-bottom:4px;">
      <button class="more-clue-btn" id="more-clue-btn" onclick="nextClue()">Show next clue (&#8722;1 point)</button>
    </div>
    <div class="ans-grid" id="ans-grid"></div>
    <div class="feedback" id="fb1"></div>
  </div>
  <div class="flex-center">
    <button class="btn btn-green hidden" id="next1-btn" onclick="goTo(2)">Continue to Match It &rarr;</button>
  </div>
</section>

<!-- SECTION 2 -->
<section class="section" id="section2">
  <div class="sec-title">Match It</div>
  <div class="sec-sub">Drag each description to the correct job.</div>
  <div class="card">
    <div class="match-cols">
      <div>
        <div class="match-col-label">Description</div>
        <div id="drag-list"></div>
      </div>
      <div>
        <div class="match-col-label">Job</div>
        <div id="drop-list"></div>
      </div>
    </div>
    <div class="feedback" id="fb2"></div>
    <div style="margin-top:16px;">
      <button class="btn btn-blue" onclick="checkMatches()">Check answers</button>
    </div>
  </div>
  <div class="flex-center">
    <button class="btn btn-green hidden" id="next2-btn" onclick="goTo(3)">Continue to Write About It &rarr;</button>
  </div>
</section>

<!-- SECTION 3 -->
<section class="section" id="section3">
  <div class="sec-title">Write About It</div>
  <div class="sec-sub">Choose a job and complete the sentences.</div>
  <div class="card">
    <p style="font-weight:800; margin-bottom:14px; font-size:0.97rem;">Choose a job:</p>
    <div class="job-grid" id="job-grid"></div>
  </div>
  <div class="card hidden" id="write-card">
    <p style="font-weight:800; font-size:1rem; margin-bottom:16px;">
      Complete the sentences about a <span id="chosen-label" style="color:var(--purple)">doctor</span>:
    </p>
    <div id="frames-container"></div>
    <p style="font-weight:800; font-size:0.93rem; margin-top:18px; margin-bottom:8px;">
      Now write one more sentence about this job:
    </p>
    <div class="word-bank-label">Word bank — click a word to add it:</div>
    <div class="word-bank" id="word-bank"></div>
    <textarea class="free-write" id="free-write"></textarea>
    <div style="margin-top:14px;">
      <button class="btn btn-purple" onclick="submitWrite()">Submit my writing</button>
    </div>
    <div class="write-result" id="write-result"></div>
  </div>
  <div class="flex-center">
    <button class="btn btn-green hidden" id="next3-btn" onclick="showFinal()">Finish!</button>
  </div>
</section>

<!-- FINAL -->
<div id="final-screen">
  <span class="big-icon">&#127942;</span>
  <h2>Well done!</h2>
  <div class="stars">&#11088;&#11088;&#11088;</div>
  <p>You finished all three activities.<br>You know a lot about jobs now!</p>
  <div style="margin-top:24px;">
    <button class="btn btn-yellow" onclick="restartAll()">Play again</button>
  </div>
</div>

<script>
// ============================================================
// DATA — all vocab from A1 lists; no tools/objects in matching
// ============================================================

const guessData = [
  {
    job: 'Doctor',
    clues: [
      'I work in a building where sick people come.',
      'I ask people: "Where does it hurt?"',
      'I help sick people get better.'
    ],
    options: ['Doctor', 'Nurse', 'Baker', 'Driver']
  },
  {
    job: 'Teacher',
    clues: [
      'I work with young people every day.',
      'I write on the board and give tests.',
      'I help students learn new things.'
    ],
    options: ['Teacher', 'Lawyer', 'Pilot', 'Waiter']
  },
  {
    job: 'Chef',
    clues: [
      'I work in a kitchen.',
      'I work with food and fire every day.',
      'I make meals for people to eat.'
    ],
    options: ['Baker', 'Chef', 'Farmer', 'Mechanic']
  },
  {
    job: 'Driver',
    clues: [
      'I work on the road.',
      'I sit in the same seat every day.',
      'I take people from one place to another.'
    ],
    options: ['Pilot', 'Driver', 'Police officer', 'Nurse']
  },
  {
    job: 'Farmer',
    clues: [
      'I work outside every day.',
      'I work with animals and plants.',
      'I grow food for people to eat.'
    ],
    options: ['Farmer', 'Gardener', 'Doctor', 'Actor']
  },
  {
    job: 'Waiter',
    clues: [
      'I work in a place where people eat.',
      'I talk to many different people every day.',
      'I bring food and drinks to the table.'
    ],
    options: ['Chef', 'Baker', 'Waiter', 'Secretary']
  },
  {
    job: 'Nurse',
    clues: [
      'I work with doctors every day.',
      'I look after sick people in a hospital.',
      'I give medicine and help patients feel better.'
    ],
    options: ['Doctor', 'Nurse', 'Secretary', 'Teacher']
  },
  {
    job: 'Pilot',
    clues: [
      'I wear a uniform and a hat.',
      'I work at an airport.',
      'I fly people to other countries.'
    ],
    options: ['Driver', 'Mechanic', 'Pilot', 'Police officer']
  },
  {
    job: 'Baker',
    clues: [
      'I start work very early in the morning.',
      'I use flour, water, and an oven.',
      'I make bread and cakes.'
    ],
    options: ['Baker', 'Chef', 'Waiter', 'Farmer']
  },
  {
    job: 'Mechanic',
    clues: [
      'I work in a garage.',
      'My hands are often dirty at work.',
      'I fix cars and buses when they do not work.'
    ],
    options: ['Mechanic', 'Engineer', 'Driver', 'Architect']
  },
  {
    job: 'Police officer',
    clues: [
      'I wear a uniform every day.',
      'I work on the street and in an office.',
      'I keep people safe and stop crime.'
    ],
    options: ['Police officer', 'Soldier', 'Nurse', 'Driver']
  },
  {
    job: 'Dentist',
    clues: [
      'People come to see me when something hurts.',
      'I work in a small room with a special chair.',
      'I look at and fix people\'s teeth.'
    ],
    options: ['Doctor', 'Dentist', 'Nurse', 'Vet']
  },
  {
    job: 'Vet',
    clues: [
      'My patients cannot talk to me.',
      'I work with cats, dogs, and other animals.',
      'I help sick animals get better.'
    ],
    options: ['Farmer', 'Doctor', 'Vet', 'Nurse']
  },
  {
    job: 'Actor',
    clues: [
      'I learn a lot of words before I work.',
      'I work on a stage or in front of a camera.',
      'I play different people in films and TV shows.'
    ],
    options: ['Singer', 'Actor', 'Dancer', 'Director']
  },
  {
    job: 'Singer',
    clues: [
      'I practise my voice every day.',
      'I perform for many people.',
      'I make music with my voice.'
    ],
    options: ['Singer', 'Actor', 'Dancer', 'Teacher']
  },
  {
    job: 'Lawyer',
    clues: [
      'I read a lot of books and documents.',
      'I talk in front of a judge.',
      'I help people with their problems in court.'
    ],
    options: ['Lawyer', 'Doctor', 'Secretary', 'Manager']
  },
  {
    job: 'Secretary',
    clues: [
      'I work in an office.',
      'I answer the phone and write emails.',
      'I help my boss organise their work.'
    ],
    options: ['Manager', 'Secretary', 'Accountant', 'Lawyer']
  },
  {
    job: 'Architect',
    clues: [
      'I draw and plan every day.',
      'I think about how buildings look inside and outside.',
      'I design houses, schools, and offices.'
    ],
    options: ['Engineer', 'Architect', 'Artist', 'Manager']
  },
  {
    job: 'Engineer',
    clues: [
      'I study how things work.',
      'I design machines, bridges, and roads.',
      'I solve technical problems.'
    ],
    options: ['Architect', 'Mechanic', 'Engineer', 'Scientist']
  },
  {
    job: 'Hairdresser',
    clues: [
      'People come to me and sit in a special chair.',
      'I use scissors and water.',
      'I cut and style people\'s hair.'
    ],
    options: ['Hairdresser', 'Nurse', 'Tailor', 'Artist']
  },
  {
    job: 'Tailor',
    clues: [
      'I work with fabric and thread.',
      'I use a needle and scissors.',
      'I make and repair clothes.'
    ],
    options: ['Tailor', 'Baker', 'Hairdresser', 'Artist']
  },
  {
    job: 'Postman',
    clues: [
      'I start work early in the morning.',
      'I walk or drive to many houses every day.',
      'I bring letters and packages to people\'s doors.'
    ],
    options: ['Driver', 'Postman', 'Waiter', 'Salesperson']
  },
  {
    job: 'Salesperson',
    clues: [
      'I talk to many people every day.',
      'I work in a shop or by phone.',
      'I help people buy things.'
    ],
    options: ['Waiter', 'Salesperson', 'Secretary', 'Postman']
  },
  {
    job: 'Artist',
    clues: [
      'I use colours and paper or canvas.',
      'I spend a lot of time alone working.',
      'I paint or draw pictures.'
    ],
    options: ['Actor', 'Photographer', 'Artist', 'Architect']
  },
  {
    job: 'Photographer',
    clues: [
      'I carry my most important tool everywhere.',
      'I look for good light and interesting moments.',
      'I take pictures of people and places.'
    ],
    options: ['Artist', 'Journalist', 'Photographer', 'Actor']
  },
  {
    job: 'Journalist',
    clues: [
      'I talk to many different people.',
      'I write stories about things that happen in the world.',
      'You can read my work in a newspaper or online.'
    ],
    options: ['Writer', 'Journalist', 'Secretary', 'Teacher']
  },
  {
    job: 'Carpenter',
    clues: [
      'I work with a natural material.',
      'I use hammers, nails, and saws.',
      'I make chairs, tables, and doors from wood.'
    ],
    options: ['Mechanic', 'Carpenter', 'Plumber', 'Engineer']
  },
  {
    job: 'Plumber',
    clues: [
      'I often work under floors and inside walls.',
      'I work with water and pipes.',
      'I fix problems when water does not come out or goes to the wrong place.'
    ],
    options: ['Electrician', 'Carpenter', 'Mechanic', 'Plumber']
  },
  {
    job: 'Gardener',
    clues: [
      'I work outside most of the time.',
      'I plant flowers, cut the grass, and water plants.',
      'I make gardens look beautiful.'
    ],
    options: ['Farmer', 'Gardener', 'Vet', 'Postman']
  },
  {
    job: 'Flight attendant',
    clues: [
      'I wear a uniform and work in a very small space.',
      'I travel to different countries every week.',
      'I help passengers on a plane and bring them food and drinks.'
    ],
    options: ['Pilot', 'Flight attendant', 'Driver', 'Waiter']
  }
];

// Descriptions use simple A1 verbs: helps, makes, fixes, takes care of, keeps, flies
const matchData = [
  { desc: 'helps sick people',           job: 'Nurse' },
  { desc: 'makes bread and cakes',       job: 'Baker' },
  { desc: 'fixes cars',                  job: 'Mechanic' },
  { desc: 'takes care of animals',       job: 'Vet' },
  { desc: 'keeps people safe',           job: 'Police officer' },
  { desc: 'flies a plane',               job: 'Pilot' },
  { desc: 'grows food on a farm',        job: 'Farmer' },
  { desc: 'cuts and styles hair',        job: 'Hairdresser' },
  { desc: 'brings letters to houses',   job: 'Postman' },
  { desc: 'makes and repairs clothes',   job: 'Tailor' }
];

// Each job has its own frames and word bank — no generic one-size-fits-all
const writeJobs = [
  {
    name: 'Doctor', pic: '&#x1F9B7;',
    frames: [
      { before: 'A doctor works in a', id: 'w0', hint: 'hospital / clinic', after: '.' },
      { before: 'Every day, a doctor', id: 'w1', hint: 'helps patients / examines sick people', after: '.' },
      { before: 'I think a doctor is', id: 'w2', hint: 'important / very busy', after: '.' }
    ],
    words: ['hospital', 'clinic', 'patients', 'sick', 'healthy', 'important', 'busy', 'helps', 'examines']
  },
  {
    name: 'Chef', pic: '&#x1F9C1;',
    frames: [
      { before: 'A chef works in a', id: 'w0', hint: 'kitchen / restaurant', after: '.' },
      { before: 'Every day, a chef', id: 'w1', hint: 'cooks food / makes meals', after: '.' },
      { before: 'I think a chef is', id: 'w2', hint: 'creative / very good at cooking', after: '.' }
    ],
    words: ['kitchen', 'restaurant', 'food', 'meals', 'cooks', 'delicious', 'hot', 'creative', 'busy']
  },
  {
    name: 'Teacher', pic: '&#x1F4DA;',
    frames: [
      { before: 'A teacher works in a', id: 'w0', hint: 'school / classroom', after: '.' },
      { before: 'Every day, a teacher', id: 'w1', hint: 'teaches students / gives lessons', after: '.' },
      { before: 'I think a teacher is', id: 'w2', hint: 'patient / very helpful', after: '.' }
    ],
    words: ['school', 'classroom', 'students', 'lessons', 'teaches', 'explains', 'patient', 'helpful', 'important']
  },
  {
    name: 'Nurse', pic: '&#x1FA7A;',
    frames: [
      { before: 'A nurse works in a', id: 'w0', hint: 'hospital / clinic', after: '.' },
      { before: 'Every day, a nurse', id: 'w1', hint: 'looks after patients / helps doctors', after: '.' },
      { before: 'I think a nurse is', id: 'w2', hint: 'kind / very helpful', after: '.' }
    ],
    words: ['hospital', 'patients', 'doctors', 'medicine', 'looks after', 'helps', 'kind', 'busy', 'important']
  },
  {
    name: 'Farmer', pic: '&#x1F33E;',
    frames: [
      { before: 'A farmer works on a', id: 'w0', hint: 'farm / big piece of land', after: '.' },
      { before: 'Every day, a farmer', id: 'w1', hint: 'grows food / takes care of animals', after: '.' },
      { before: 'I think a farmer is', id: 'w2', hint: 'hardworking / very important', after: '.' }
    ],
    words: ['farm', 'land', 'animals', 'vegetables', 'fruit', 'grows', 'takes care of', 'hardworking', 'outside']
  },
  {
    name: 'Pilot', pic: '&#x2708;',
    frames: [
      { before: 'A pilot works on a', id: 'w0', hint: 'plane / big aeroplane', after: '.' },
      { before: 'Every day, a pilot', id: 'w1', hint: 'flies a plane / travels to other countries', after: '.' },
      { before: 'I think a pilot is', id: 'w2', hint: 'brave / very skilled', after: '.' }
    ],
    words: ['plane', 'airport', 'passengers', 'flies', 'travels', 'countries', 'brave', 'skilled', 'uniform']
  },
  {
    name: 'Baker', pic: '&#x1F956;',
    frames: [
      { before: 'A baker works in a', id: 'w0', hint: 'bakery / shop', after: '.' },
      { before: 'Every day, a baker', id: 'w1', hint: 'makes bread / bakes cakes', after: '.' },
      { before: 'I think a baker is', id: 'w2', hint: 'creative / very good at baking', after: '.' }
    ],
    words: ['bakery', 'bread', 'cakes', 'bakes', 'makes', 'sells', 'flour', 'oven', 'delicious']
  },
  {
    name: 'Driver', pic: '&#x1F697;',
    frames: [
      { before: 'A driver works in a', id: 'w0', hint: 'taxi / bus / car', after: '.' },
      { before: 'Every day, a driver', id: 'w1', hint: 'takes people to different places', after: '.' },
      { before: 'I think a driver is', id: 'w2', hint: 'careful / very experienced', after: '.' }
    ],
    words: ['car', 'bus', 'taxi', 'road', 'drives', 'takes people', 'careful', 'experienced', 'town']
  }
];

// ============================================================
// SECTION 1
// ============================================================
let curRound = 0, curClue = 0, pts = 3, score1 = 0, answered = false;

function loadRound() {
  if (curRound >= guessData.length) {
    document.getElementById('guess-card').innerHTML = `
      <div style="text-align:center;padding:16px;">
        <p style="font-size:1.15rem;font-weight:800;margin-bottom:8px;">Guessing game complete!</p>
        <p style="color:#64748b;font-weight:700;">Your score: <span style="color:var(--sun);font-family:'Fredoka One';font-size:1.6rem">${score1}</span> points</p>
      </div>`;
    document.getElementById('step1').classList.add('done');
    document.getElementById('next1-btn').classList.remove('hidden');
    return;
  }

  answered = false; curClue = 0; pts = 3;
  const d = guessData[curRound];

  document.getElementById('round-num').textContent = curRound + 1;
  document.getElementById('score1').textContent = score1;
  document.getElementById('clue-label').textContent = 'Clue 1 of 3';
  document.getElementById('clue-box').textContent = d.clues[0];
  document.getElementById('fb1').textContent = '';
  document.getElementById('fb1').className = 'feedback';
  document.getElementById('more-clue-btn').style.display = 'inline-block';

  const grid = document.getElementById('ans-grid');
  grid.innerHTML = '';
  [...d.options].sort(() => Math.random() - .5).forEach(opt => {
    const b = document.createElement('button');
    b.className = 'ans-btn';
    b.textContent = opt;
    b.onclick = () => pickAnswer(opt, b);
    grid.appendChild(b);
  });
}

function nextClue() {
  if (answered) return;
  curClue++;
  const d = guessData[curRound];
  if (curClue >= d.clues.length) { document.getElementById('more-clue-btn').style.display = 'none'; return; }
  pts = Math.max(1, pts - 1);
  document.getElementById('clue-label').textContent = `Clue ${curClue + 1} of 3`;
  document.getElementById('clue-box').textContent = d.clues[curClue];
  if (curClue === d.clues.length - 1) document.getElementById('more-clue-btn').style.display = 'none';
}

function pickAnswer(chosen, btn) {
  if (answered) return;
  answered = true;
  document.getElementById('more-clue-btn').style.display = 'none';
  const correct = guessData[curRound].job;

  document.querySelectorAll('.ans-btn').forEach(b => {
    b.disabled = true;
    if (b.textContent === correct) b.classList.add('correct');
  });

  const fb = document.getElementById('fb1');
  if (chosen === correct) {
    score1 += pts;
    document.getElementById('score1').textContent = score1;
    fb.textContent = `Correct! +${pts} point${pts > 1 ? 's' : ''}`;
    fb.className = 'feedback ok';
  } else {
    btn.classList.add('wrong');
    fb.textContent = `Not quite — the answer was: ${correct}`;
    fb.className = 'feedback err';
  }

  setTimeout(() => { curRound++; loadRound(); }, 2000);
}

// ============================================================
// SECTION 2
// ============================================================
let draggedDesc = null;

function buildMatch() {
  const dl = document.getElementById('drag-list');
  const dropl = document.getElementById('drop-list');
  dl.innerHTML = ''; dropl.innerHTML = '';

  const shuffledDescs = [...matchData].sort(() => Math.random() - .5);
  const shuffledJobs  = [...matchData].sort(() => Math.random() - .5);

  shuffledDescs.forEach(item => {
    const el = document.createElement('div');
    el.className = 'drag-item';
    el.draggable = true;
    el.dataset.desc = item.desc;
    el.textContent = item.desc;
    el.addEventListener('dragstart', () => { draggedDesc = item.desc; el.classList.add('dragging'); });
    el.addEventListener('dragend', () => el.classList.remove('dragging'));
    dl.appendChild(el);
  });

  shuffledJobs.forEach(item => {
    const row = document.createElement('div');
    row.className = 'drop-row';
    const label = document.createElement('div');
    label.className = 'drop-job-label';
    label.textContent = item.job;
    const zone = document.createElement('div');
    zone.className = 'drop-zone';
    zone.dataset.job = item.job;
    zone.textContent = 'Drop here';

    zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('over'); });
    zone.addEventListener('dragleave', () => zone.classList.remove('over'));
    zone.addEventListener('drop', e => {
      e.preventDefault(); zone.classList.remove('over');
      if (!draggedDesc) return;
      // Clear previous placement of this description
      document.querySelectorAll('.drop-zone').forEach(z => {
        if (z !== zone && z.dataset.filled === draggedDesc) {
          z.textContent = 'Drop here'; z.className = 'drop-zone'; delete z.dataset.filled;
          document.querySelectorAll('.drag-item').forEach(d => { if (d.dataset.desc === draggedDesc) d.classList.remove('used'); });
        }
      });
      zone.textContent = draggedDesc; zone.className = 'drop-zone filled'; zone.dataset.filled = draggedDesc;
      document.querySelectorAll('.drag-item').forEach(d => { if (d.dataset.desc === draggedDesc) d.classList.add('used'); });
      draggedDesc = null;
    });

    row.appendChild(label); row.appendChild(zone); dropl.appendChild(row);
  });
}

function checkMatches() {
  let correct = 0;
  document.querySelectorAll('.drop-zone').forEach(zone => {
    const filled = zone.dataset.filled; if (!filled) return;
    const expected = matchData.find(m => m.desc === filled);
    if (expected && expected.job === zone.dataset.job) {
      zone.className = 'drop-zone correct'; correct++;
    } else {
      zone.className = 'drop-zone wrong';
      setTimeout(() => {
        document.querySelectorAll('.drag-item').forEach(d => { if (d.dataset.desc === zone.dataset.filled) d.classList.remove('used'); });
        zone.textContent = 'Drop here'; zone.className = 'drop-zone'; delete zone.dataset.filled;
      }, 1600);
    }
  });

  const fb = document.getElementById('fb2');
  if (correct === matchData.length) {
    fb.textContent = `All ${correct} correct! Great work!`; fb.className = 'feedback ok';
    document.getElementById('step2').classList.add('done');
    document.getElementById('next2-btn').classList.remove('hidden');
  } else {
    fb.textContent = `${correct} correct. The red ones were wrong — try them again.`; fb.className = 'feedback err';
    setTimeout(() => { fb.textContent = ''; }, 2400);
  }
}

// ============================================================
// SECTION 3
// ============================================================
let chosenJob = null;

function buildWrite() {
  const grid = document.getElementById('job-grid');
  grid.innerHTML = '';
  writeJobs.forEach(j => {
    const btn = document.createElement('div');
    btn.className = 'job-card';
    btn.innerHTML = `<span class="pic">${j.pic}</span>${j.name}`;
    btn.onclick = () => selectJob(j.name, btn);
    grid.appendChild(btn);
  });
}

function selectJob(name, btn) {
  document.querySelectorAll('.job-card').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  chosenJob = writeJobs.find(j => j.name === name);
  document.getElementById('chosen-label').textContent = chosenJob.name.toLowerCase();

  const container = document.getElementById('frames-container');
  container.innerHTML = '';
  chosenJob.frames.forEach(f => {
    const block = document.createElement('div');
    block.className = 'frame-block';
    const input = document.createElement('input');
    input.className = 'blank'; input.id = f.id;
    block.appendChild(document.createTextNode(f.before + ' '));
    block.appendChild(input);
    block.appendChild(document.createTextNode(' ' + f.after));
    container.appendChild(block);
  });

  const wb = document.getElementById('word-bank');
  wb.innerHTML = '';
  chosenJob.words.forEach(w => {
    const chip = document.createElement('span');
    chip.className = 'chip'; chip.textContent = w;
    chip.onclick = () => {
      const ta = document.getElementById('free-write');
      ta.value += (ta.value && !ta.value.endsWith(' ') ? ' ' : '') + w + ' ';
      ta.focus();
    };
    wb.appendChild(chip);
  });

  document.getElementById('free-write').value = '';
  document.getElementById('write-result').style.display = 'none';
  document.getElementById('next3-btn').classList.add('hidden');
  document.getElementById('write-card').classList.remove('hidden');
}

function submitWrite() {
  if (!chosenJob) return;
  const lines = chosenJob.frames.map(f => {
    const val = document.getElementById(f.id).value.trim() || '___';
    return f.before + ' ' + val + ' ' + f.after;
  });
  const extra = document.getElementById('free-write').value.trim();
  const result = document.getElementById('write-result');
  result.style.display = 'block';
  result.innerHTML =
    `<strong>Your writing about a ${chosenJob.name}:</strong><br><br>` +
    lines.join('<br>') +
    (extra ? '<br>' + extra : '') +
    '<br><br>Good work!';
  document.getElementById('step3').classList.add('done');
  document.getElementById('next3-btn').classList.remove('hidden');
}

// ============================================================
// NAV
// ============================================================
function goTo(n) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('section' + n).classList.add('active');
  document.querySelectorAll('.prog-step').forEach((s, i) => {
    if (!s.classList.contains('done')) s.classList.remove('active');
    if (i + 1 === n && !s.classList.contains('done')) s.classList.add('active');
  });
}

function showFinal() {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.prog-step').forEach(s => s.classList.add('done'));
  document.getElementById('final-screen').style.display = 'block';
}

function restartAll() {
  curRound = 0; score1 = 0; curClue = 0; chosenJob = null;
  ['next1-btn','next2-btn','next3-btn'].forEach(id => document.getElementById(id).classList.add('hidden'));
  document.getElementById('final-screen').style.display = 'none';
  document.getElementById('write-card').classList.add('hidden');
  document.querySelectorAll('.prog-step').forEach((s, i) => {
    s.classList.remove('done','active'); if (i === 0) s.classList.add('active');
  });
  buildMatch(); buildWrite(); loadRound(); goTo(1);
}

// Init
loadRound(); buildMatch(); buildWrite();
</script>
</body>
</html>
